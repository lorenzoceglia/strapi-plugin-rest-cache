import{_ as e,c as s,o as a,a as n}from"./app.4b6b3d2e.js";const C=JSON.parse('{"title":"Services","description":"","frontmatter":{"title":"Services"},"headers":[{"level":2,"title":"cacheConfig","slug":"cacheconfig","link":"#cacheconfig","children":[{"level":3,"title":"getUids()","slug":"getuids","link":"#getuids","children":[]},{"level":3,"title":"getRelatedCachedUid(uid)","slug":"getrelatedcacheduid-uid","link":"#getrelatedcacheduid-uid","children":[]},{"level":3,"title":"get(uid)","slug":"get-uid","link":"#get-uid","children":[]},{"level":3,"title":"getCacheKeysRegexp(uid, params, wildcard)","slug":"getcachekeysregexp-uid-params-wildcard","link":"#getcachekeysregexp-uid-params-wildcard","children":[]},{"level":3,"title":"isCached()","slug":"iscached","link":"#iscached","children":[]}]},{"level":2,"title":"cacheStore","slug":"cachestore","link":"#cachestore","children":[{"level":3,"title":"get(key)","slug":"get-key","link":"#get-key","children":[]},{"level":3,"title":"set(key, val, maxAge)","slug":"set-key-val-maxage","link":"#set-key-val-maxage","children":[]},{"level":3,"title":"del(key)","slug":"del-key","link":"#del-key","children":[]},{"level":3,"title":"keys()","slug":"keys","link":"#keys","children":[]},{"level":3,"title":"reset()","slug":"reset","link":"#reset","children":[]},{"level":3,"title":"init()","slug":"init","link":"#init","children":[]},{"level":3,"title":"ready","slug":"ready","link":"#ready","children":[]},{"level":3,"title":"clearByRegexp(regExps)","slug":"clearbyregexp-regexps","link":"#clearbyregexp-regexps","children":[]},{"level":3,"title":"clearByUid(uid, params, wildcard)","slug":"clearbyuid-uid-params-wildcard","link":"#clearbyuid-uid-params-wildcard","children":[]}]}],"relativePath":"guide/api/index.md","lastUpdated":1672538480000}'),l={name:"guide/api/index.md"},c=n(`<h1 id="services" tabindex="-1">Services <a class="header-anchor" href="#services" aria-hidden="true">#</a></h1><p>This plugin exposes a few services that can be used to interact with the cache.</p><h2 id="cacheconfig" tabindex="-1">cacheConfig <a class="header-anchor" href="#cacheconfig" aria-hidden="true">#</a></h2><p>This service is used to interact with the plugin configuration.</p><h3 id="getuids" tabindex="-1"><code>getUids()</code> <a class="header-anchor" href="#getuids" aria-hidden="true">#</a></h3><p>Get all uid of cached contentTypes</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> uids </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> strapi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugins[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rest-cache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cacheConfig</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUids</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="getrelatedcacheduid-uid" tabindex="-1"><code>getRelatedCachedUid(uid)</code> <a class="header-anchor" href="#getrelatedcacheduid-uid" aria-hidden="true">#</a></h3><p>Return the intersection of cached contentTypes and the related contentTypes of a given contentType uid</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> relatedUids </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> strapi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugins[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rest-cache</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cacheConfig</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getRelatedCachedUid</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">api::article.article</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="get-uid" tabindex="-1"><code>get(uid)</code> <a class="header-anchor" href="#get-uid" aria-hidden="true">#</a></h3><p>Get related <code>CacheContentTypeConfig</code> with an uid</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> contentTypeConfig </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> strapi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugins[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rest-cache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cacheConfig</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">api::article.article</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="getcachekeysregexp-uid-params-wildcard" tabindex="-1"><code>getCacheKeysRegexp(uid, params, wildcard)</code> <a class="header-anchor" href="#getcachekeysregexp-uid-params-wildcard" aria-hidden="true">#</a></h3><p>Get regexs to match all <code>CacheContentTypeConfig</code> keys with given params</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> regExps </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> strapi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugins[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rest-cache</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cacheConfig</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCacheKeysRegexp</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">api::article.article</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">lang</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h3 id="iscached" tabindex="-1"><code>isCached()</code> <a class="header-anchor" href="#iscached" aria-hidden="true">#</a></h3><p>Check if a cache configuration exists for a contentType uid</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> isContentTypeCached </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> strapi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">plugins[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rest-cache</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">services</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cacheConfig</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isCached</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">api::article.article</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="cachestore" tabindex="-1">cacheStore <a class="header-anchor" href="#cachestore" aria-hidden="true">#</a></h2><p>This service is used to interact with the cache store.</p><h3 id="get-key" tabindex="-1"><code>get(key)</code> <a class="header-anchor" href="#get-key" aria-hidden="true">#</a></h3><h3 id="set-key-val-maxage" tabindex="-1"><code>set(key, val, maxAge)</code> <a class="header-anchor" href="#set-key-val-maxage" aria-hidden="true">#</a></h3><h3 id="del-key" tabindex="-1"><code>del(key)</code> <a class="header-anchor" href="#del-key" aria-hidden="true">#</a></h3><h3 id="keys" tabindex="-1"><code>keys()</code> <a class="header-anchor" href="#keys" aria-hidden="true">#</a></h3><h3 id="reset" tabindex="-1"><code>reset()</code> <a class="header-anchor" href="#reset" aria-hidden="true">#</a></h3><h3 id="init" tabindex="-1"><code>init()</code> <a class="header-anchor" href="#init" aria-hidden="true">#</a></h3><h3 id="ready" tabindex="-1"><code>ready</code> <a class="header-anchor" href="#ready" aria-hidden="true">#</a></h3><h3 id="clearbyregexp-regexps" tabindex="-1"><code>clearByRegexp(regExps)</code> <a class="header-anchor" href="#clearbyregexp-regexps" aria-hidden="true">#</a></h3><h3 id="clearbyuid-uid-params-wildcard" tabindex="-1"><code>clearByUid(uid, params, wildcard)</code> <a class="header-anchor" href="#clearbyuid-uid-params-wildcard" aria-hidden="true">#</a></h3>`,30),t=[c];function o(p,r,i,d,h,y){return a(),s("div",null,t)}const u=e(l,[["render",o]]);export{C as __pageData,u as default};
